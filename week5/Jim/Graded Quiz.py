'''
11027147邱峻彥 11027140陳芃睿 11027250黃唯
--------------------------------------------------------------------------------------------------------------------------------
題目敘述:
有一家電信公司正在研擬一個新服務區域的無線基地臺設置計畫。在這個區域裡，一共有 n 個城
鎮，編號為 1、2 直到 n ，而城鎮 i 的人口數是 Pi 。公司將此區域以一公里為單位，畫出了一個二
維座標系，並且以 (xi, yi) 表示城鎮 i 的位置。換句話說，城鎮 i1 跟城鎮 i2 之間的距離是
( ( x1 - x2 ) ** 2 + ( y1 - y2 ) ** 2 ) ** 0.5
公里。如果一個基地臺跟一個城鎮的距離在 d 公里以內，我們就說這個基地臺可以「覆蓋」這個
城鎮，也就是這個城鎮的人可以收得到強度足夠的從該基地臺發出的訊號。公司預計在此區域的
個城鎮中挑選 p 個城鎮設置基地臺，以求能覆蓋最多的人口數。
你在這家電信公司工作，負責挑出這 p 個城鎮。為此，你設計了一個貪婪演算法。首先在所有城
鎮中，你找出「如果蓋在這裡，將可以覆蓋最多人」的城鎮，然後設一個基地臺在那裡。現在你
還能再設置 p-1 個基地臺，所以如法泡製，在所有還沒有基地臺的城鎮中，找出「如果蓋在這
裡，將可以覆蓋最多還沒被覆蓋的人」的城鎮，設一個基地臺在那裡，然後繼續如此直到挑出 p
個城鎮去設置基地臺為止。如果在任一時刻遇到有兩個以上的城鎮可以被選，就選編號較小的那
個。

輸入輸出格式:
在每筆測試資料中，第一列存放三個整數 n 、 p 跟 d ；在第二列至第 n+1 列中，第 i 列存放三個整
數 Xi-1 、 yi-1 與 Pi-1 ，分別表示第 i-1 個城鎮的 x 座標、 y 座標和人口數。在任意一列中，兩個
數字之間都以一個空白隔開。已知2 ≤ n ≤ 1000 、 2 ≤ p ≤ n 、 −100 ≤ xi ≤ 100、
−100 ≤ yi ≤ 100 、 1 ≤ Pi ≤ 100。不會有兩個城鎮落在同一個地點。
讀入這些資料之後，請根據題目指定的演算法，求出應該在哪 p 個城鎮設置基地臺，然後依照選擇
的先後順序由先而後印出這些城鎮的編號，最後輸出被覆蓋的總人數。任兩個城鎮編號間，用一個
空白隔開。
--------------------------------------------------------------------------------------------------------------------------------
根據題目規定，在給定城鎮數、最多可設置基地台數以及基地台的可覆蓋範圍下，找出能覆蓋最多人口數的 p 個城鎮設置基地台，並輸出這些城鎮的編號以及被覆蓋的總人數。

程式碼的執行流程如下：

1. 首先，讀取城鎮數 n、最多可設置基地台數 p、基地台的可覆蓋範圍 d。

2. 接著，使用迴圈讀取每個城鎮的座標和人口數，並將這些資訊存入 cityInfo 列表中。

3. 初始化一個布林列表 unVisited，表示所有城鎮都還沒有設置基地台。初始化 best_cities 列表，用來存儲選擇的最佳城鎮。

4. 在迴圈中，程式會依次選擇 p 個城鎮設置基地台。在每次選擇時，程式會找出當前未設置基地台的城鎮中，哪個城鎮設置基地台能覆蓋最多人口數。
   為此，程式會計算每個城鎮設置基地台後的覆蓋範圍，然後選擇能覆蓋最多人口數的城鎮。如果有多個城鎮能覆蓋同樣的最多人口數，程式會選擇編號較小的城鎮。

5. 當程式選擇出一個最佳城鎮後，它會將這個城鎮的編號和對應的覆蓋人口數加入 best_cities 列表中。
   然後，程式會將這個城鎮對應的 unVisited 設為 False，表示這個城鎮已經設置了基地台。

6. 繼續迴圈，直到選擇了 p 個最佳城鎮。在這個過程中，每當選擇一個最佳城鎮，程式都會將這個城鎮的覆蓋範圍內的其他城鎮對應的 unVisited 設為 False。

7. 最後，程式會輸出所選擇的最佳城鎮的編號，並計算被覆蓋的總人數並輸出。
--------------------------------------------------------------------------------------------------------------------------------
'''

import math

def distance(x1, y1, x2, y2):
    return math.sqrt((x2 - x1)**2 + (y2 - y1)**2)

input_string = input() 

''' 
    map()是一個內建函數，它接受一個函數（如int）和一個可迭代對象（如列表、元組等），
    並將該函數應用於可迭代對象中的每個元素。它返回一個新的可迭代對象，
    其中包含應用函數後的結果。
'''
n, p, d = map(int, input_string.split())  # 城鎮數，最多可設置基地台數，可覆蓋範圍

cityInfo = []
for i in range(0, n):
    input_string = input()  # 輸入城鎮座標及人口數
    cityInfo.append(input_string.split())

unVisited = [True] * n
best_cities = []

for _ in range(p):  # 迴圈執行 p 次，選擇 p 個城鎮設置基地台
    max_population = 0
    beat_city = 0
    for i, cityA in enumerate(cityInfo):  # 選擇要設在哪個城鎮
        if unVisited[i]:
            population = 0
            covered = []
            for j, cityB in enumerate(cityInfo):  # 計算設在此城鎮的覆蓋範圍
                if distance(int(cityA[0]), int(cityA[1]), int(cityB[0]), int(cityB[1])) <= d and unVisited[j]:
                    population += int(cityB[2])
                    covered.append(j+1)

            if population > max_population:  # 設定當前最適合設基地台的城鎮和其覆蓋範圍
                max_population = population
                beat_city = i + 1
                covered_cities = covered

    best_cities.append((beat_city, max_population))
    for k in covered_cities:
        unVisited[k-1] = False

total_population = 0
for city, population in best_cities:
    total_population += population
    print(city, end = " ")

print(total_population, end = "")
